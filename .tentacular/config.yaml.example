# Tentacular project-level configuration
# Copy to .tentacular/config.yaml and customize.
# User-level config: ~/.tentacular/config.yaml
# Project overrides user. CLI flags override both.

# Default registry for tntc build --push
registry: "ghcr.io/randybias"

# Default namespace (overridden by workflow.yaml or CLI -n)
namespace: default

# Default RuntimeClass (empty disables gVisor)
runtime_class: gvisor

# Named environments for tntc deploy --env and tntc test --live --env
#
# Cluster access: use EITHER kubeconfig OR context (not both).
#   kubeconfig: path to a standalone kubeconfig file (~ is expanded)
#   context:    context name within your default kubeconfig (~/.kube/config or $KUBECONFIG)
# If neither is set, the default kubeconfig and current context are used.
environments:
  # Example: dedicated kubeconfig file (recommended for multi-cluster setups)
  dev:
    kubeconfig: ~/dev-secrets/kubeconfigs/my-cluster.kubeconfig
    namespace: dev-workflows
    runtime_class: ""               # no gVisor in kind
    # image: ghcr.io/randybias/tentacular-engine:latest  # optional; defaults to base-image.txt

  # Example: context within default kubeconfig (simpler single-cluster setups)
  staging:
    context: staging-cluster        # context name in ~/.kube/config
    namespace: staging-workflows
    runtime_class: gvisor

  # Example: kubeconfig with explicit context (multi-context kubeconfig files)
  prod:
    kubeconfig: ~/dev-secrets/kubeconfigs/prod.kubeconfig
    context: prod-admin             # select a specific context within the file
    namespace: tentacular
    runtime_class: gvisor
    image: ghcr.io/randybias/tentacular-engine:latest
    # config_overrides:
    #   pg_host: "postgres.db.svc.cluster.local"
    #   pg_port: 5432
