## Why

Phase 1 (`base-engine-image`) decoupled the Deno engine from workflow code in the Docker image. But without a delivery mechanism for workflow code, the deployed container can't run anything. This change completes the Fast Deploy feature by: (a) generating a K8s ConfigMap containing workflow code, (b) mounting it into the Deployment, and (c) updating the deploy command to handle the new flow including rollout restarts. This eliminates Docker rebuilds entirely for code-only changes — `pipedreamer deploy` just updates the ConfigMap and restarts pods.

## What Changes

### ConfigMap Generation (new)
- New function `GenerateCodeConfigMap(wf *spec.Workflow, workflowDir, namespace string) (Manifest, error)` in `pkg/builder/k8s.go`
- Reads `workflow.yaml` and all `nodes/*.ts` files from disk
- Packs into a ConfigMap: key = relative path (e.g., `workflow.yaml`, `nodes/fetch.ts`), value = file content
- ConfigMap name: `{wf.Name}-code`
- Same labels pattern (`app.kubernetes.io/name` + `app.kubernetes.io/managed-by`)
- Returns error if total data size exceeds 900KB (K8s ConfigMap limit is 1MB; 900KB provides safety margin)

### Deployment Volume Mount (modification)
- `GenerateK8sManifests()` adds a `code` volume to the Deployment pod spec: `configMap: { name: {wf.Name}-code }`
- Adds volumeMount: `mountPath: /app/workflow, readOnly: true`
- No container `args` needed — the base image ENTRYPOINT already defaults to `--workflow /app/workflow/workflow.yaml --port 8080`, which matches the ConfigMap mount path

### Deploy Command Updates (modification)
- `deploy.go` generates ConfigMap via `builder.GenerateCodeConfigMap()` and includes it in the manifest list
- Image resolution cascade: `--image` flag > `.pipedreamer/base-image.txt` > `pipedreamer-engine:latest`
- Replaces `--cluster-registry` flag with `--image` flag (simpler, more explicit)
- After successful apply, triggers a rollout restart to pick up ConfigMap changes

### K8s Client (new method)
- New `RolloutRestart(namespace, deploymentName string) error` on `pkg/k8s/client.go`
- Patches deployment annotation `kubectl.kubernetes.io/restartedAt` with current timestamp
- Uses 30-second timeout consistent with other K8s operations

### Tests
- `TestConfigMapGeneration` — validates ConfigMap content, keys, labels
- `TestConfigMapSizeValidation` — validates 900KB limit enforcement
- `TestDeploymentHasCodeVolumeMount` — validates code volume + mount in Deployment
- `TestDeploymentNoContainerArgs` — validates no container args are set (relies on ENTRYPOINT defaults)
- Existing CronJob tests verified for no regression

## Capabilities

### New Capabilities
- `configmap-code-delivery`: ConfigMap-based workflow code delivery including generation, size validation, Deployment volume mounting, and rollout restart mechanism.

### Modified Capabilities
- `k8s-deploy`: Deploy command resolves base image via cascade (`--image` > file > default), generates and applies ConfigMap alongside other manifests, triggers rollout restart. Replaces `--cluster-registry` with `--image` flag. Deployment manifest includes code volume mount.
- `container-build`: No code changes — but the Deployment manifest now includes a code ConfigMap volume, which is generated by `GenerateK8sManifests()`.

## Impact

- **`pkg/builder/k8s.go`**: New `GenerateCodeConfigMap()` function. `GenerateK8sManifests()` updated to add code volume and volumeMount to Deployment template.
- **`pkg/cli/deploy.go`**: Updated to generate ConfigMap, resolve base image via cascade, replace `--cluster-registry` with `--image`, trigger rollout restart after apply.
- **`pkg/k8s/client.go`**: New `RolloutRestart()` method that patches deployment restart annotation.
- **`pkg/builder/k8s_test.go`**: New tests for ConfigMap generation, size validation, volume mount, no container args. Existing CronJob tests verified.
- **Downstream impact**: This completes the Fast Deploy feature. After this change, `pipedreamer build` builds the engine image once, and subsequent `pipedreamer deploy` calls only update the ConfigMap + restart pods.
